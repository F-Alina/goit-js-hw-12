{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst perPage = 15;\n\nasync function getImagesByQuery(query, page) {\n  const searchParams = new URLSearchParams({\n    key: '50274230-e09cffa3049f5c538182e0b60',\n    q: query,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    per_page: perPage,\n    page: page,\n  });\n\n  try {\n    const response = await axios.get(\n      `https://pixabay.com/api/?${searchParams}`\n    );\n    return response.data;\n  } catch (err) {\n    throw err;\n  }\n}\n\nexport { getImagesByQuery };\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nlet lightbox;\nconst loader = document.querySelector('.loader');\nconst gallery = document.querySelector('.gallery');\nconst loadMoreBtn = document.querySelector('.btn-load');\n\nconst box = document.querySelector('.gallery-item');\n\nfunction createGallery(images) {\n  return images\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => `<li class=\"gallery-item\">\n      <a class=\"gallery-link\" href=\"${largeImageURL}\">\n        <img\n          class=\"gallery-image\"\n          src=\"${webformatURL}\"\n          alt=\"${tags}\"\n          width = \"360\"\n        />\n      </a>\n      <div class=\"gallery-content\">\n\t\t<ul class=\"gallery-content-wrapper\">\n\t\t\t<li>Likes<span>${likes}</span></li>\n\t\t\t<li>Views<span>${views}</span></li>\n\t\t\t<li>Comments<span>${comments}</span></li>\n\t\t\t<li>Downloads<span>${downloads}</span></li>\n\t\t</ul>\n\t</div>\n    </li>`\n    )\n    .join('');\n}\nfunction clearGallery() {\n  gallery.innerHTML = '';\n}\n\nfunction showLoader() {\n  loader.classList.add('visible');\n}\n\nfunction hideLoader() {\n  loader.classList.remove('visible');\n}\n\nfunction showLoadMoreButton() {\n  loadMoreBtn.classList.add('visible');\n}\n\nfunction hideLoadMoreButton() {\n  loadMoreBtn.classList.remove('visible');\n}\n\nfunction initializeLightbox() {\n  lightbox = new SimpleLightbox('.gallery a', {\n    captions: true,\n    captionsData: 'alt',\n    captionDelay: 250,\n  });\n}\n\nfunction refreshLightbox() {\n  if (lightbox) {\n    lightbox.refresh();\n  }\n}\n\nexport {\n  createGallery,\n  clearGallery,\n  showLoader,\n  hideLoader,\n  initializeLightbox,\n  refreshLightbox,\n  showLoadMoreButton,\n  hideLoadMoreButton,\n};\n","import { getImagesByQuery } from './js/pixabay-api';\nimport {\n  createGallery,\n  clearGallery,\n  showLoader,\n  hideLoader,\n  initializeLightbox,\n  refreshLightbox,\n  showLoadMoreButton,\n  hideLoadMoreButton,\n} from './js/render-functions';\n\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst formSearch = document.querySelector('.form');\nconst gallery = document.querySelector('.gallery');\nconst searchInput = document.querySelector('.form-search-input');\nconst loader = document.querySelector('.loader');\nconst loadMoreBtn = document.querySelector('.btn-load');\n\nlet currentPage = 1;\nlet queryValue = '';\nconst perPage = 15;\nlet cardHeight = 0;\n\ninitializeLightbox();\nhideLoadMoreButton();\n\nfunction scrollToMoreContent() {\n  const card = document.querySelector('.gallery-item');\n  if (card) {\n    cardHeight = card.getBoundingClientRect().height;\n\n    window.scrollBy({\n      top: cardHeight * 2,\n      behavior: 'smooth',\n    });\n  }\n}\n\nformSearch.addEventListener('submit', async e => {\n  e.preventDefault();\n  hideLoader();\n  queryValue = searchInput.value.trim();\n\n  if (!queryValue) {\n    iziToast.warning({\n      title: 'Warning',\n      message: 'Please fill in the input field!',\n    });\n    return;\n  }\n\n  currentPage = 1;\n\n  clearGallery();\n  hideLoadMoreButton();\n  showLoader();\n\n  try {\n    const data = await getImagesByQuery(queryValue, currentPage);\n    hideLoader();\n\n    if (!data.hits.length) {\n      iziToast.error({\n        title: 'Error',\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n      });\n      hideLoadMoreButton();\n    } else {\n      gallery.innerHTML = createGallery(data.hits);\n\n      refreshLightbox();\n\n      const card = document.querySelector('.gallery-item');\n      if (card) {\n        cardHeight = card.getBoundingClientRect().height;\n      }\n\n      if (data.totalHits > perPage) {\n        showLoadMoreButton();\n      } else {\n        iziToast.info({\n          title: 'Info',\n          message: \"We're sorry, but you've reached the end of search results.\",\n        });\n\n        hideLoadMoreButton();\n      }\n    }\n\n    formSearch.reset();\n  } catch (err) {\n    hideLoader();\n    console.log(err);\n  }\n});\n\nloadMoreBtn.addEventListener('click', async () => {\n  currentPage += 1;\n  showLoader();\n\n  try {\n    const data = await getImagesByQuery(queryValue, currentPage);\n\n    hideLoader();\n\n    gallery.insertAdjacentHTML('beforeend', createGallery(data.hits));\n\n    refreshLightbox();\n\n    scrollToMoreContent();\n\n    if (currentPage * perPage >= data.totalHits) {\n      hideLoadMoreButton();\n      iziToast.info({\n        title: 'Info',\n        message: \"We're sorry, but you've reached the end of search results.\",\n      });\n    }\n  } catch (err) {\n    hideLoader();\n    console.log(err);\n  }\n});\n"],"names":["perPage","getImagesByQuery","query","page","searchParams","axios","err","lightbox","loader","gallery","loadMoreBtn","createGallery","images","webformatURL","largeImageURL","tags","likes","views","comments","downloads","clearGallery","showLoader","hideLoader","showLoadMoreButton","hideLoadMoreButton","initializeLightbox","SimpleLightbox","refreshLightbox","formSearch","searchInput","currentPage","queryValue","cardHeight","scrollToMoreContent","card","e","iziToast","data"],"mappings":"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"}